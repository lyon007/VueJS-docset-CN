import{_ as a,c as n,b as l,o as e}from"./chunks/framework.B2oIMGqn.js";const d=JSON.parse('{"title":"编译时标志","description":"","frontmatter":{"outline":"deep"},"headers":[{"level":2,"title":"__VUE_OPTIONS_API__","slug":"VUE_OPTIONS_API","link":"#VUE_OPTIONS_API","children":[]},{"level":2,"title":"__VUE_PROD_DEVTOOLS__","slug":"VUE_PROD_DEVTOOLS","link":"#VUE_PROD_DEVTOOLS","children":[]},{"level":2,"title":"__VUE_PROD_HYDRATION_MISMATCH_DETAILS__","slug":"VUE_PROD_HYDRATION_MISMATCH_DETAILS","link":"#VUE_PROD_HYDRATION_MISMATCH_DETAILS","children":[]},{"level":2,"title":"配置指南","slug":"configuration-guides","link":"#configuration-guides","children":[{"level":3,"title":"Vite","slug":"vite","link":"#vite","children":[]},{"level":3,"title":"vue-cli","slug":"vue-cli","link":"#vue-cli","children":[]},{"level":3,"title":"webpack","slug":"webpack","link":"#webpack","children":[]},{"level":3,"title":"Rollup","slug":"rollup","link":"#rollup","children":[]}]}],"relativePath":"api/compile-time-flags.md","filePath":"api/compile-time-flags.md"}'),p={name:"api/compile-time-flags.md"};function o(c,s,t,i,r,E){return e(),n("div",null,s[0]||(s[0]=[l(`<h1 id="compile-time-flags" tabindex="-1">编译时标志 <a class="header-anchor" href="#compile-time-flags" aria-label="Permalink to &quot;编译时标志 {#compile-time-flags}&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>编译时标志仅在使用 Vue 的 <code>esm-bundler</code> 构建版本时生效 (即 <code>vue/dist/vue.esm-bundler.js</code>)。</p></div><p>当以带有构建步骤的方式使用 Vue 时，可以配置一些编译时标志以启用/禁用特定的功能。使用编译时标志的好处是，以这种方式禁用的功能可以通过 tree-shaking 从最终的打包结果中移除。</p><p>即使没有显式地配置这些标志，Vue 也会正常工作。然而，建议始终对它们进行配置，以便在可能的情况下正确地删除相关功能。</p><p>请参考<a href="#configuration-guides">配置指南</a>来了解如何根据你的构建工具进行配置。</p><h2 id="VUE_OPTIONS_API" tabindex="-1"><code>__VUE_OPTIONS_API__</code> <a class="header-anchor" href="#VUE_OPTIONS_API" aria-label="Permalink to &quot;\`__VUE_OPTIONS_API__\` {#VUE_OPTIONS_API}&quot;">​</a></h2><ul><li><p><strong>默认值：</strong><code>true</code></p><p>启用/禁用选项式 API 支持。禁用此功能将减小打包结果的体积，但如果第三方库依赖选项式 API，则可能影响兼容性。</p></li></ul><h2 id="VUE_PROD_DEVTOOLS" tabindex="-1"><code>__VUE_PROD_DEVTOOLS__</code> <a class="header-anchor" href="#VUE_PROD_DEVTOOLS" aria-label="Permalink to &quot;\`__VUE_PROD_DEVTOOLS__\` {#VUE_PROD_DEVTOOLS}&quot;">​</a></h2><ul><li><p><strong>默认值：</strong><code>false</code></p><p>在生产环境中启用/禁用开发者工具支持。启用会在打包结果中包含更多代码，因此建议仅在调试时启用此功能。</p></li></ul><h2 id="VUE_PROD_HYDRATION_MISMATCH_DETAILS" tabindex="-1"><code>__VUE_PROD_HYDRATION_MISMATCH_DETAILS__</code> <a class="header-anchor" href="#VUE_PROD_HYDRATION_MISMATCH_DETAILS" aria-label="Permalink to &quot;\`__VUE_PROD_HYDRATION_MISMATCH_DETAILS__\` {#VUE_PROD_HYDRATION_MISMATCH_DETAILS}&quot;">​</a></h2><ul><li><p><strong>默认值：</strong><code>false</code></p><p>启用/禁用生产环境构建下激活 (hydration) 不匹配的详细警告。启用会在打包结果中包含更多代码，因此建议仅在调试时启用此功能。</p></li><li><p>仅在 3.4+ 中可用</p></li></ul><h2 id="configuration-guides" tabindex="-1">配置指南 <a class="header-anchor" href="#configuration-guides" aria-label="Permalink to &quot;配置指南 {#configuration-guides}&quot;">​</a></h2><h3 id="vite" tabindex="-1">Vite <a class="header-anchor" href="#vite" aria-label="Permalink to &quot;Vite {#vite}&quot;">​</a></h3><p><code>@vitejs/plugin-vue</code> 会自动为这些标志提供默认值。要更改默认值，请使用 Vite 的 <a href="https://vitejs.dev/config/shared-options.html#define" target="_blank" rel="noreferrer"><code>define</code> 配置项</a>：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { defineConfig } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#B392F0;"> defineConfig</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  define: {</span></span>
<span class="line"><span style="color:#6A737D;">    // 启用生产环境构建下激活不匹配的详细警告</span></span>
<span class="line"><span style="color:#E1E4E8;">    __VUE_PROD_HYDRATION_MISMATCH_DETAILS__: </span><span style="color:#9ECBFF;">&#39;true&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre></div><h3 id="vue-cli" tabindex="-1">vue-cli <a class="header-anchor" href="#vue-cli" aria-label="Permalink to &quot;vue-cli {#vue-cli}&quot;">​</a></h3><p><code>@vue/cli-service</code> 自动为其中一些标志提供默认值。要配置/修改这些值：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// vue.config.js</span></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  chainWebpack</span><span style="color:#E1E4E8;">: (</span><span style="color:#FFAB70;">config</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    config.</span><span style="color:#B392F0;">plugin</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;define&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">tap</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">definitions</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      Object.</span><span style="color:#B392F0;">assign</span><span style="color:#E1E4E8;">(definitions[</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">], {</span></span>
<span class="line"><span style="color:#E1E4E8;">        __VUE_OPTIONS_API__: </span><span style="color:#9ECBFF;">&#39;true&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        __VUE_PROD_DEVTOOLS__: </span><span style="color:#9ECBFF;">&#39;false&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        __VUE_PROD_HYDRATION_MISMATCH_DETAILS__: </span><span style="color:#9ECBFF;">&#39;false&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">      })</span></span>
<span class="line"><span style="color:#F97583;">      return</span><span style="color:#E1E4E8;"> definitions</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="webpack" tabindex="-1">webpack <a class="header-anchor" href="#webpack" aria-label="Permalink to &quot;webpack {#webpack}&quot;">​</a></h3><p>应该使用 webpack 的 <a href="https://webpack.js.org/plugins/define-plugin/" target="_blank" rel="noreferrer">DefinePlugin</a> 定义这些标志：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// webpack.config.js</span></span>
<span class="line"><span style="color:#79B8FF;">module</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">exports</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#6A737D;">  // ...</span></span>
<span class="line"><span style="color:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="color:#F97583;">    new</span><span style="color:#E1E4E8;"> webpack.</span><span style="color:#B392F0;">DefinePlugin</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      __VUE_OPTIONS_API__: </span><span style="color:#9ECBFF;">&#39;true&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      __VUE_PROD_DEVTOOLS__: </span><span style="color:#9ECBFF;">&#39;false&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      __VUE_PROD_HYDRATION_MISMATCH_DETAILS__: </span><span style="color:#9ECBFF;">&#39;false&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h3 id="rollup" tabindex="-1">Rollup <a class="header-anchor" href="#rollup" aria-label="Permalink to &quot;Rollup {#rollup}&quot;">​</a></h3><p>应该使用 <a href="https://github.com/rollup/plugins/tree/master/packages/replace" target="_blank" rel="noreferrer">@rollup/plugin-replace</a> 定义这些标志：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// rollup.config.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> replace </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &#39;@rollup/plugin-replace&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="color:#B392F0;">    replace</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      __VUE_OPTIONS_API__: </span><span style="color:#9ECBFF;">&#39;true&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      __VUE_PROD_DEVTOOLS__: </span><span style="color:#9ECBFF;">&#39;false&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      __VUE_PROD_HYDRATION_MISMATCH_DETAILS__: </span><span style="color:#9ECBFF;">&#39;false&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  ]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div>`,24)]))}const u=a(p,[["render",o]]);export{d as __pageData,u as default};
